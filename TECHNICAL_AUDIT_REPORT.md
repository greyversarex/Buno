# üîç –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ô –ê–£–î–ò–¢ –ü–†–û–ï–ö–¢–ê BUNYOD-TOUR

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:** 03 –æ–∫—Ç—è–±—Ä—è 2025  
**–ê—É–¥–∏—Ç–æ—Ä:** AI Technical Auditor  
**–í–µ—Ä—Å–∏—è:** 1.0

---

## EXECUTIVE SUMMARY

Bunyod-Tour - —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–π –ê–∑–∏–∏, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º —Å—Ç–µ–∫–µ (Node.js/Express + TypeScript, PostgreSQL + Prisma, Vanilla JS frontend). –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç **—Å–æ–ª–∏–¥–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é –±–∞–∑—É** —Å —Ö–æ—Ä–æ—à–æ –ø—Ä–æ–¥—É–º–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏, –Ω–æ –∏–º–µ–µ—Ç **—Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∫–æ–¥–∞**, **–Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –¥–∞–Ω–Ω—ã—Ö** –∏ **—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –¥–æ–ª–≥–æ–º** –≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏.

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:** 6.5/10  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:** 70%  
**–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** 6/10  
**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å:** 5.5/10

---

## –†–ê–ó–î–ï–õ 1: –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

### 1.1 –û–±—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
```
bunyod-tour/
‚îú‚îÄ‚îÄ frontend/              # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã + React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ public/           # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã (CSS, JS, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ components/       # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (ObjectUploader)
‚îÇ   ‚îú‚îÄ‚îÄ src/              # React –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ)
‚îÇ   ‚îî‚îÄ‚îÄ *.html            # –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (index, admin-dashboard –∏ —Ç.–¥.)
‚îú‚îÄ‚îÄ src/                  # Backend TypeScript –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ controllers/      # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (25 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ models/           # Prisma –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ routes/           # API –º–∞—Ä—à—Ä—É—Ç—ã (25 —Ñ–∞–π–ª–æ–≤ —Ä–æ—É—Ç–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ middleware/       # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ services/         # –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (email, payment, storage)
‚îÇ   ‚îî‚îÄ‚îÄ utils/            # –£—Ç–∏–ª–∏—Ç—ã (multilingual, migrations)
‚îú‚îÄ‚îÄ prisma/               # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ö–µ–º–∞
‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma     # 781 —Å—Ç—Ä–æ–∫–∞, 35+ –º–æ–¥–µ–ª–µ–π
‚îú‚îÄ‚îÄ uploads/              # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ index.js              # –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (unified server)
```

#### –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–û:**
- ‚úÖ **–ï–¥–∏–Ω—ã–π —Å–µ—Ä–≤–µ—Ä**: `index.js` –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –±—ç–∫–µ–Ω–¥ –Ω–∞ –æ–¥–Ω–æ–º –ø–æ—Ä—Ç—É (5000)
- ‚úÖ **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ**: Backend (TypeScript/API) –∏ Frontend (HTML/JS) –ª–æ–≥–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã
- ‚úÖ **MVC –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Controllers ‚Üí Models ‚Üí Routes —Å–ª–µ–¥—É—é—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—É MVC
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã**: –û–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `utils/` –∏ `public/js/`

**–ü–†–û–ë–õ–ï–ú–ù–û:**
- ‚ö†Ô∏è **–ì–∏–±—Ä–∏–¥–Ω—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥**: –°–º–µ—à–∏–≤–∞–Ω–∏–µ Vanilla JS (–æ—Å–Ω–æ–≤–∞) —Å React (—á–∞—Å—Ç–∏—á–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω)
- ‚ö†Ô∏è **–ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π admin-dashboard.html**: 15,012 —Å—Ç—Ä–æ–∫ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ - –Ω–∞—Ä—É—à–∞–µ—Ç Single Responsibility
- ‚ö†Ô∏è **–†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏**: CSS –≤—Å—Ç—Ä–æ–µ–Ω inline –≤ HTML + –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã

**–û–¶–ï–ù–ö–ê –°–¢–†–£–ö–¢–£–†–´:** 7/10  
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ª–æ–≥–∏—á–Ω–∞, –Ω–æ —Å—Ç—Ä–∞–¥–∞–µ—Ç –æ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Å—Ç—Ä–æ–≥–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤ –∏ —Ç–µ—Ö–¥–æ–ª–≥–∞ –≤ –∞–¥–º–∏–Ω–∫–µ.

---

### 1.2 –§—Ä–æ–Ω—Ç–µ–Ω–¥

#### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **–û—Å–Ω–æ–≤–∞:** Vanilla JavaScript (ES6+) –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
- **UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:** Tailwind CSS (CDN), Font Awesome
- **–ß–∞—Å—Ç–∏—á–Ω–æ:** React 18.2.0 (ObjectUploader –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
- **–ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å:** –ö–∞—Å—Ç–æ–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ i18n.js + multilingual-utils.js

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥

**–ü–õ–Æ–°–´:**
1. **–ü—Ä–æ—Å—Ç–æ—Ç–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ = –º–µ–Ω—å—à–µ overhead, –±—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
2. **–ì–∏–±–∫–æ—Å—Ç—å:** –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞
3. **SEO-friendly:** –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ö–æ—Ä–æ—à–æ –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è
4. **–ú–æ–¥—É–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:** `i18n.js`, `utils.js`, `admin-helpers.js` —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

**–ú–ò–ù–£–°–´:**
1. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Ö–¥–æ–ª–≥ - admin-dashboard.html (15,012 —Å—Ç—Ä–æ–∫):**
   ```
   - –°—Ç—Ä–æ–∫–∏ 1-225:    –°—Ç–∏–ª–∏ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ CSS)
   - –°—Ç—Ä–æ–∫–∏ 226-3500:  HTML —Ä–∞–∑–º–µ—Ç–∫–∞ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤)
   - –°—Ç—Ä–æ–∫–∏ 3501-15012: JavaScript –ª–æ–≥–∏–∫–∞ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö)
   ```
   **–ü—Ä–æ–±–ª–µ–º—ã:**
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å (–Ω–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—é = 10+ –º–∏–Ω—É—Ç)
   - –†–∏—Å–∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—Ä–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Ä–∞–±–æ—Ç–µ (merge conflicts)
   - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏

2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**
   - –ö–∞–∂–¥—ã–π HTML —Ñ–∞–π–ª –¥—É–±–ª–∏—Ä—É–µ—Ç `<header>` –∏ `<footer>`
   - **–†–µ—à–µ–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ:** `layout-loader.js` –∑–∞–≥—Ä—É–∂–∞–µ—Ç `_header.html` + `_footer.html`
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç loader (inconsistency)

3. **–ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º:**
   - **–¢—É—Ä—ã:** –ï–¥–∏–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `saveTourForm()` (—Ö–æ—Ä–æ—à–æ)
   - **–û—Ç–µ–ª–∏:** Inline –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ event listener (–ø–ª–æ—Ö–æ)
   - **–ì–∏–¥—ã:** –î–≤–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ `saveGuide()` –∏ `saveEditGuide()` (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)

4. **–°–º–µ—à–µ–Ω–∏–µ React –∏ Vanilla JS:**
   - React –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è `ObjectUploader` (1 –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
   - React –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (2.5MB) –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, –Ω–æ –ø–æ—á—Ç–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
   - –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –∑–∞—á–µ–º React –≤ –ø—Ä–æ–µ–∫—Ç–µ, –µ—Å–ª–∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ - Vanilla JS

#### –ü—Ä–∏–º–µ—Ä—ã –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

**–ü–†–ò–ú–ï–† 1: –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω/–≥–æ—Ä–æ–¥–æ–≤ –¥–ª—è —Ñ–æ—Ä–º**
```javascript
// –í admin-dashboard.html –Ω–∞–π–¥–µ–Ω–æ 4 –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- loadCountriesForTourForm()        // –°—Ç—Ä–æ–∫–∞ ~4500
- loadGuideCitiesByCountry()        // –°—Ç—Ä–æ–∫–∞ ~8300
- loadEditGuideCitiesByCountry()    // –°—Ç—Ä–æ–∫–∞ ~8557
- loadCountriesForEditTourAgent()   // –°—Ç—Ä–æ–∫–∞ ~10253

// –í—Å–µ –¥–µ–ª–∞—é—Ç –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ: fetch('/api/countries') ‚Üí populate <select>
```

**–ü–†–ò–ú–ï–† 2: –ü–∞—Ä—Å–∏–Ω–≥ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã—Ö –ø–æ–ª–µ–π**
```javascript
// –ù–∞–π–¥–µ–Ω–æ 3 —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ parseMultilingualField:
1. frontend/public/js/multilingual-utils.js  // –û—Å–Ω–æ–≤–Ω–∞—è
2. frontend/public/js/admin-helpers.js       // –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∞ 823)
3. frontend/public/js/home-page.js           // Inline –≤–∞—Ä–∏–∞–Ω—Ç—ã
```

**–û–¶–ï–ù–ö–ê –§–†–û–ù–¢–ï–ù–î–ê:** 5/10  
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Ö–¥–æ–ª–≥ –≤ –∞–¥–º–∏–Ω–∫–µ
- –ù–µ–æ–±—Ö–æ–¥–∏–º —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ admin-dashboard.html (—Ä–∞–∑–±–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª–∏)
- –†–µ—à–∏—Ç—å –≤–æ–ø—Ä–æ—Å —Å React (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å)

---

### 1.3 –ë—ç–∫–µ–Ω–¥

#### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **–§—Ä–µ–π–º–≤–æ—Ä–∫:** Express.js 5.1.0
- **–Ø–∑—ã–∫:** TypeScript 5.9.2 —Å ts-node
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** MVC —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º Controller ‚Üí Model ‚Üí Route

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ –≤ `src/`

```
src/
‚îú‚îÄ‚îÄ controllers/  (25 —Ñ–∞–π–ª–æ–≤) - –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ tourController.ts          ‚úÖ 1,400+ —Å—Ç—Ä–æ–∫, —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω
‚îÇ   ‚îú‚îÄ‚îÄ guideController.ts         ‚úÖ 800+ —Å—Ç—Ä–æ–∫, –ª–æ–≥–∏—á–Ω—ã–π
‚îÇ   ‚îú‚îÄ‚îÄ hotelController.ts         ‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π, CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ routes/       (25 —Ñ–∞–π–ª–æ–≤) - API endpoints
‚îÇ   ‚îú‚îÄ‚îÄ index.ts                   ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ä–æ—É—Ç–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ tourRoutes.ts              ‚úÖ RESTful endpoints
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ middleware/   (3 —Ñ–∞–π–ª–∞)
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts                    ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π JWT_SECRET
‚îÇ   ‚îú‚îÄ‚îÄ tourGuideAuth.ts           ‚úÖ –û—Ç–¥–µ–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ errorHandler.ts            ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ models/       (1 —Ñ–∞–π–ª)
‚îÇ   ‚îî‚îÄ‚îÄ index.ts                   ‚úÖ Prisma-based –º–æ–¥–µ–ª–∏ —Å –º–µ—Ç–æ–¥–∞–º–∏
‚îú‚îÄ‚îÄ services/     (4 —Ñ–∞–π–ª–∞)
‚îÇ   ‚îú‚îÄ‚îÄ emailService.ts            ‚úÖ Nodemailer –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ paymentService.ts          ‚úÖ Multiple payment gateways
‚îÇ   ‚îú‚îÄ‚îÄ objectStorage.ts           ‚úÖ File upload handling
‚îÇ   ‚îî‚îÄ‚îÄ translationService.ts      ‚úÖ i18n –Ω–∞ –±—ç–∫–µ–Ω–¥–µ
‚îî‚îÄ‚îÄ utils/        (3 —Ñ–∞–π–ª–∞)
    ‚îú‚îÄ‚îÄ multilingual.ts            ‚úÖ –ö–ª—é—á–µ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è i18n
    ‚îú‚îÄ‚îÄ initializeDatabase.ts      ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
    ‚îî‚îÄ‚îÄ migrationVersioning.ts     ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
```

#### –û—Ü–µ–Ω–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –±—ç–∫–µ–Ω–¥–∞

**–°–ò–õ–¨–ù–´–ï –°–¢–û–†–û–ù–´:**
1. ‚úÖ **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ö–∞–∂–¥—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–ª–µ–¥—É–µ—Ç –æ–¥–Ω–æ–º—É –ø–∞—Ç—Ç–µ—Ä–Ω—É
2. ‚úÖ **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:** Controllers –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞–ø—Ä—è–º—É—é —Å –ë–î - —á–µ—Ä–µ–∑ Models
3. ‚úÖ **Type safety:** TypeScript + Prisma = —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
4. ‚úÖ **Middleware –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** CORS, Auth, Error handling —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã
5. ‚úÖ **Service layer:** –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (email, payments) –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã

**–ü–†–û–ë–õ–ï–ú–´:**
1. ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º–∏:**
   ```typescript
   // –û–¥–∏–Ω–∞–∫–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ tourController, guideController, hotelController:
   if (!title || !title.en || !title.ru) {
     return res.status(400).json({ success: false, error: '...' });
   }
   ```
   **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å `validators/commonValidators.ts`

2. ‚ö†Ô∏è **Inconsistent error handling:**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `next(error)`
   - –î—Ä—É–≥–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `res.status(500).json(...)`
   - –ù–µ—Ç –µ–¥–∏–Ω–æ–≥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞

3. ‚ö†Ô∏è **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ validation layer:**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–∞ –ø–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞–º
   - –ù–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫ —Ç–∏–ø–∞ Joi, Zod –∏–ª–∏ class-validator

**–û–¶–ï–ù–ö–ê –ë–≠–ö–ï–ù–î–ê:** 7.5/10  
–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω, –Ω–æ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

---

### 1.4 –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **–°–£–ë–î:** PostgreSQL (Neon managed database)
- **ORM:** Prisma 6.15.0
- **–°—Ö–µ–º–∞:** 781 —Å—Ç—Ä–æ–∫–∞, 35+ –º–æ–¥–µ–ª–µ–π

#### –ê–Ω–∞–ª–∏–∑ schema.prisma

**–ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–´–ï –ê–°–ü–ï–ö–¢–´:**
1. ‚úÖ **–•–æ—Ä–æ—à–æ –ø—Ä–æ–¥—É–º–∞–Ω–Ω—ã–µ —Å–≤—è–∑–∏:**
   ```prisma
   // Many-to-many —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
   model TourBlockAssignment { tourId, tourBlockId }
   model TourHotel { tourId, hotelId }
   model TourGuide { tourId, guideId }
   model TourCountry { tourId, countryId }
   model TourCity { tourId, cityId }
   ```

2. ‚úÖ **–ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ:**
   ```prisma
   onDelete: Cascade  // –í 15+ –º–µ—Å—Ç–∞—Ö - –∑–∞—â–∏—Ç–∞ –æ—Ç orphaned records
   ```

3. ‚úÖ **–ò–Ω–¥–µ–∫—Å—ã –∏ constraints:**
   ```prisma
   @@unique([tourId, hotelId])  // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã
   @unique @map("email")         // –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å email
   ```

4. ‚úÖ **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏:**
   - `MigrationVersion` –º–æ–¥–µ–ª—å –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `initializeDatabase.ts`

**–ü–†–û–ë–õ–ï–ú–´ –ò INCONSISTENCIES:**

1. **‚ùå –ö–†–ò–¢–ò–ß–ù–û: –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Json` —Ç–∏–ø–∞**
   ```prisma
   // ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–µ –ø–æ–ª—è –∫–∞–∫ Json:
   model Tour {
     title       Json          // { en: "...", ru: "..." }
     description Json
   }

   model Hotel {
     name        Json          // { en: "...", ru: "..." }
     description Json?
   }

   model Guide {
     name        Json          // { en: "...", ru: "..." }
     description Json?
   }

   // ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å Json, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è String:
   model Country {
     name   String  @unique   // –ü—Ä–æ–±–ª–µ–º–∞: –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å { en, ru }
     nameRu String
     nameEn String             // –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ! –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: name Json
   }

   model City {
     name   String            // –¢–∞ –∂–µ –ø—Ä–æ–±–ª–µ–º–∞
     nameRu String
     nameEn String
   }

   model Category {
     name String              // ‚ùå –î–æ–ª–∂–Ω–æ –±—ã—Ç—å Json!
   }
   ```

   **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
   - –ú–æ–¥–µ–ª–∏ `Country` –∏ `City` —Ö—Ä–∞–Ω—è—Ç —è–∑—ã–∫–∏ –≤ 3 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–ª—è—Ö
   - –ú–æ–¥–µ–ª—å `Category` —Ö—Ä–∞–Ω–∏—Ç name –∫–∞–∫ —Å—Ç—Ä–æ–∫—É, –ø–∞—Ä—Å–∏–Ω–≥ –¥–µ–ª–∞–µ—Ç—Å—è –≤ –∫–æ–¥–µ
   - –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É—Å–ª–æ–∂–Ω—è–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ –≤–≤–æ–¥–∏—Ç –±–∞–≥–∏

2. **‚ö†Ô∏è –í—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:**
   ```prisma
   model Tour {
     countryId Int?       // –ù–æ–≤–æ–µ –ø–æ–ª–µ (—Å–≤—è–∑—å)
     country   String?    // –í—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ ‚ùå
     cityId    Int?
     city      String?    // –í—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ ‚ùå
   }
   ```
   **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—è `country` –∏ `city` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã, –Ω–æ –æ—Å—Ç–∞–ª–∏—Å—å

3. **‚ö†Ô∏è –°–º–µ—à–µ–Ω–∏–µ enum –∏ String:**
   ```prisma
   enum HotelCategory { STANDARD, SEMI_LUX, LUX, DELUXE }  // ‚úÖ –•–æ—Ä–æ—à–æ

   model Tour {
     priceType String @default("–∑–∞ —á–µ–ª–æ–≤–µ–∫–∞")  // ‚ùå –î–æ–ª–∂–µ–Ω –±—ã—Ç—å enum!
     status    String @default("pending")      // ‚ùå –î–æ–ª–∂–µ–Ω –±—ã—Ç—å enum!
   }
   ```

4. **‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ soft delete:**
   ```prisma
   // –¢–æ–ª—å–∫–æ —Ñ–ª–∞–≥ isActive, –Ω–æ –Ω–µ—Ç deletedAt
   model Tour {
     isActive Boolean @default(true)
     // deletedAt DateTime?  ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
   }
   ```

**–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ë–î:**
1. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–µ –ø–æ–ª—è:**
   ```prisma
   // –ò–∑–º–µ–Ω–∏—Ç—å Country, City, Category:
   model Country {
     name Json  // { en: "Tajikistan", ru: "–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω" }
     // –£–¥–∞–ª–∏—Ç—å nameRu, nameEn
   }
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å enum –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤:**
   ```prisma
   enum PriceType { PER_PERSON, PER_GROUP }
   enum TourStatus { PENDING, ACTIVE, CANCELLED, COMPLETED }
   ```

3. **–£–±—Ä–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª—è:**
   ```prisma
   model Tour {
     // –£–¥–∞–ª–∏—Ç—å country, city (String)
     // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ countryId, cityId
   }
   ```

**–û–¶–ï–ù–ö–ê –ë–ê–ó–´ –î–ê–ù–ù–´–•:** 7/10  
–•–æ—Ä–æ—à–æ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞, –Ω–æ –∏–º–µ–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è

---

## –†–ê–ó–î–ï–õ 2: –ê–ù–ê–õ–ò–ó –ö–õ–Æ–ß–ï–í–´–• –°–ò–°–¢–ï–ú

### 2.1 –°–∏—Å—Ç–µ–º–∞ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏ (i18n)

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–≤—É—Ö—Å–ª–æ–π–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—É—é –¥–≤—É—Ö—Å–ª–æ–π–Ω—É—é —Å–∏—Å—Ç–µ–º—É –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           –°–¢–ê–¢–ò–ß–ï–°–ö–ò–ô –ö–û–ù–¢–ï–ù–¢               ‚îÇ
‚îÇ  (—Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–æ–∫, labels, –Ω–∞–≤–∏–≥–∞—Ü–∏—è)         ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  –û–±—Ä–∞–±–æ—Ç–∫–∞: i18n.js                        ‚îÇ
‚îÇ  –ú–µ—Ç–æ–¥: data-translate –∞—Ç—Ä–∏–±—É—Ç—ã            ‚îÇ
‚îÇ  –ü—Ä–∏–º–µ—Ä: <button data-translate="btn.save">‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ          –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò–ô –ö–û–ù–¢–ï–ù–¢               ‚îÇ
‚îÇ  (–Ω–∞–∑–≤–∞–Ω–∏—è —Ç—É—Ä–æ–≤, –æ–ø–∏—Å–∞–Ω–∏—è –∏–∑ –ë–î)          ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  –û–±—Ä–∞–±–æ—Ç–∫–∞: multilingual-utils.js          ‚îÇ
‚îÇ  –ú–µ—Ç–æ–¥: data-multilingual-* –∞—Ç—Ä–∏–±—É—Ç—ã       ‚îÇ
‚îÇ  –ü—Ä–∏–º–µ—Ä: data-title-ru, data-title-en      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –¶–ï–ù–¢–†–ê–õ–ò–ó–û–í–ê–ù–ù–û–ï –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï –Ø–ó–´–ö–ê      ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  –§—É–Ω–∫—Ü–∏—è: updatePageLanguage(lang)         ‚îÇ
‚îÇ  ‚îú‚îÄ translateStaticInterface(lang)         ‚îÇ
‚îÇ  ‚îî‚îÄ translateAllDynamicContent(lang)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**1. i18n.js (–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ª–æ–π) - 700+ —Å—Ç—Ä–æ–∫**

**–°–ò–õ–¨–ù–´–ï –°–¢–û–†–û–ù–´:**
- ‚úÖ **–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å:** ~200 –∫–ª—é—á–µ–π –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ `window.translations`
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤:** MutationObserver –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç DOM
- ‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:** `updatePageLanguage()` - single source of truth
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤:** text, placeholder, alt, title, value

```javascript
// –ü—Ä–∏–º–µ—Ä –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞:
function translateStaticInterface(lang) {
  document.querySelectorAll('[data-translate]').forEach(el => {
    const key = el.getAttribute('data-translate');
    const translation = getTranslation(key, lang);
    
    // –£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞: –ø–µ—Ä–µ–≤–æ–¥–∏—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∞—Ç—Ä–∏–±—É—Ç–æ–≤
    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
      if (el.placeholder) el.placeholder = translation;
      if (el.value && !el.dataset.keepValue) el.value = translation;
    } else {
      el.textContent = translation;
    }
  });
}
```

**–ü–†–û–ë–õ–ï–ú–´:**
- ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–ª—é—á–∏ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è (`price.per_person` vs `tour.per_person`)
- ‚ö†Ô∏è **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fallback:** –ï—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–∞–º –∫–ª—é—á (`btn.save` –≤–º–µ—Å—Ç–æ "Save")
- ‚ö†Ô∏è **–ù–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ JSON:** –í—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã hardcoded –≤ JS (–¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∏–∑ `/locales/ru.json`)

**2. multilingual-utils.js (–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Å–ª–æ–π) - 400+ —Å—Ç—Ä–æ–∫**

**–°–ò–õ–¨–ù–´–ï –°–¢–û–†–û–ù–´:**
- ‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥:** `safeJsonParse()` —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
- ‚úÖ **–£–º–Ω—ã–π fallback:** –ï—Å–ª–∏ EN –ø—É—Å—Ç–æ–π, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç RU –∏ –Ω–∞–æ–±–æ—Ä–æ—Ç
- ‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** `updateMultilingualElement()`

```javascript
// –ü—Ä–∏–º–µ—Ä –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞:
function safeJsonParse(jsonString, defaultValue = { ru: '', en: '' }) {
  if (!jsonString) return defaultValue;
  if (typeof jsonString === 'object') return jsonString;  // –£–∂–µ –æ–±—ä–µ–∫—Ç
  
  try {
    return JSON.parse(jsonString);
  } catch (error) {
    // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ã—á–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ—ë
    if (typeof jsonString === 'string') return jsonString;
    console.warn('JSON parsing error:', error);
    return defaultValue;
  }
}
```

**–ü–†–û–ë–õ–ï–ú–´:**
- ‚ö†Ô∏è **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –±—ç–∫–µ–Ω–¥–æ–º:** –¢–∞ –∂–µ –ª–æ–≥–∏–∫–∞ –µ—Å—Ç—å –≤ `src/utils/multilingual.ts`
- ‚ö†Ô∏è **–ù–µ—Ç unit —Ç–µ—Å—Ç–æ–≤:** –ö—Ä–∏—Ç–∏—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –Ω–æ –Ω–µ –ø–æ–∫—Ä—ã—Ç–∞ —Ç–µ—Å—Ç–∞–º–∏

**3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º**

**–ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢:**
```javascript
// 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
window.addEventListener('DOMContentLoaded', () => {
  initializeLanguage();  // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —è–∑—ã–∫ –∏–∑ localStorage
});

// 2. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º:
function updatePageLanguage(lang) {
  window.currentLanguage = lang;
  localStorage.setItem('selectedLanguage', lang);
  
  // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
  translateStaticInterface(lang);
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
  translateAllDynamicContent(lang);
  
  // –£–≤–µ–¥–æ–º–ª—è–µ–º –¥—Ä—É–≥–∏–µ —Å–∫—Ä–∏–ø—Ç—ã
  document.dispatchEvent(new CustomEvent('languageChanged', { 
    detail: { language: lang } 
  }));
}

// 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤:
const observer = new MutationObserver((mutations) => {
  mutations.forEach(mutation => {
    mutation.addedNodes.forEach(node => {
      if (node.nodeType === 1) {  // Element node
        translateNewElement(node, currentLanguage);
      }
    });
  });
});
```

#### –û—Ü–µ–Ω–∫–∞ —Å–∏—Å—Ç–µ–º—ã –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏

**–û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê:** 8/10

**–°–ò–õ–¨–ù–´–ï –°–¢–û–†–û–ù–´:**
- ‚úÖ –ü—Ä–æ–¥—É–º–∞–Ω–Ω–∞—è –¥–≤—É—Ö—Å–ª–æ–π–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥ –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (MutationObserver)
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (`updatePageLanguage`)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ JSON
- ‚úÖ –£–º–Ω—ã–µ fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã

**–°–õ–ê–ë–´–ï –°–¢–û–†–û–ù–´:**
- ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±—ç–∫–µ–Ω–¥–æ–º
- ‚ö†Ô∏è –ü–µ—Ä–µ–≤–æ–¥—ã hardcoded, –∞ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ JSON
- ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ—Å—Ç–æ–≤
- ‚ö†Ô∏è –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–ª—é—Ä–∞–ª–∏–∑–∞—Ü–∏–∏ (1 –¥–µ–Ω—å vs 2 –¥–Ω—è)

**–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:**
1. **–ó–∞–≥—Ä—É–∂–∞—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –∏–∑ JSON:**
   ```javascript
   async function loadTranslations(lang) {
     const response = await fetch(`/public/js/i18n/locales/${lang}.json`);
     window.translations = await response.json();
   }
   ```

2. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å –±—ç–∫–µ–Ω–¥–æ–º:**
   ```javascript
   // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–Ω—É –≤–µ—Ä—Å–∏—é safeJsonParse –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ –∏ –±—ç–∫–µ
   // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ utils –∫–∞–∫ npm –º–æ–¥—É–ª—å
   ```

3. **–î–æ–±–∞–≤–∏—Ç—å –ø–ª—é—Ä–∞–ª–∏–∑–∞—Ü–∏—é:**
   ```javascript
   function pluralize(count, key) {
     // "day": { one: "–¥–µ–Ω—å", few: "–¥–Ω—è", many: "–¥–Ω–µ–π" }
     if (count === 1) return translations[key].one;
     if (count < 5) return translations[key].few;
     return translations[key].many;
   }
   ```

---

### 2.2 –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ admin-dashboard.html

**–¢–ï–ö–£–©–ï–ï –°–û–°–¢–û–Ø–ù–ò–ï:**
- –§–∞–π–ª: `frontend/admin-dashboard.html`
- –†–∞–∑–º–µ—Ä: **15,012 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞**
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞: HTML + CSS + JavaScript –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ
- –ú–æ–¥—É–ª–∏: Tours, Hotels, Guides, Drivers, Orders, Reviews, Categories, Tour Blocks, Slides

#### –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –º–æ–¥—É–ª–µ–π

**–ú–û–î–£–õ–¨ "–¢–£–†–´" (Tours) - –°—Ç—Ä–æ–∫–∏ 4000-6000**

‚úÖ **–õ—É—á—à–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –ø—Ä–æ–µ–∫—Ç–µ:**
```javascript
function saveTourForm() {
  const tourId = document.getElementById('tourId')?.value;
  const isEditing = tourId && tourId !== '';
  
  // –ï–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  const method = isEditing ? 'PUT' : 'POST';
  const url = isEditing ? `/api/tours/${tourId}` : '/api/tours';
  
  // –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö
  const tourData = {
    title: {
      en: document.getElementById('tourTitleEN').value,
      ru: document.getElementById('tourTitleRU').value
    },
    description: { /* ... */ },
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
  };
  
  // –ï–¥–∏–Ω—ã–π –∑–∞–ø—Ä–æ—Å
  fetch(url, { method, body: JSON.stringify(tourData) })
    .then(/* ... */);
}
```

**–ü–ª—é—Å—ã:**
- –ï–¥–∏–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è create/update
- –ß–µ—Ç–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã—Ö –ø–æ–ª–µ–π

---

**–ú–û–î–£–õ–¨ "–û–¢–ï–õ–ò" (Hotels) - –°—Ç—Ä–æ–∫–∏ 6800-7500**

‚ö†Ô∏è **–ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ event listener
document.getElementById('hotelForm').addEventListener('submit', async (event) => {
  event.preventDefault();
  
  // Inline –ª–æ–≥–∏–∫–∞ –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
  const hotelData = {
    name: {
      en: document.getElementById('hotelNameEN').value,
      ru: document.getElementById('hotelNameRU').value
    },
    // ...
  };
  
  // –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  if (hotelId) {
    await fetch(`/api/hotels/${hotelId}`, { method: 'PUT', /* ... */ });
  } else {
    await fetch('/api/hotels', { method: 'POST', /* ... */ });
  }
});

// ‚ùå –ü–†–û–ë–õ–ï–ú–ê: –û—Ç–¥–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è editHotel
function editHotel(hotelId) {
  // –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  fetch(`/api/hotels/${hotelId}`)
    .then(/* ... */);
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `saveHotel()`
- –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è
- –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSON –ø–æ–ª–µ–π

---

**–ú–û–î–£–õ–¨ "–ì–ò–î–´" (Guides) - –°—Ç—Ä–æ–∫–∏ 8000-9800**

‚ùå **–°–∞–º–∞—è –ø—Ä–æ–±–ª–µ–º–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```javascript
// ‚ùå –ü–†–û–ë–õ–ï–ú–ê 1: –î–≤–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–π
function saveGuide() {
  const guideData = new FormData();
  guideData.append('name', JSON.stringify({
    en: document.getElementById('guideNameEN').value,
    ru: document.getElementById('guideNameRU').value
  }));
  // ...
  
  fetch('/api/guides', { method: 'POST', body: guideData });
}

function saveEditGuide() {
  const guideId = document.getElementById('editGuideId').value;
  const guideData = new FormData();
  guideData.append('name', JSON.stringify({
    en: document.getElementById('editGuideNameEN').value,  // ‚ùå –î—É–±–ª–∏–∫–∞—Ü–∏—è!
    ru: document.getElementById('editGuideNameRU').value
  }));
  // ...
  
  fetch(`/api/guides/${guideId}`, { method: 'PUT', body: guideData });
}

// ‚ùå –ü–†–û–ë–õ–ï–ú–ê 2: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –∑–∞–≥—Ä—É–∑–∫–∏
async function loadEditGuideCountries() { /* ... */ }
async function loadGuideCitiesByCountry() { /* ... */ }
async function loadEditGuideCitiesByCountry() { /* ... */ }

// ‚ùå –ü–†–û–ë–õ–ï–ú–ê 3: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —è–∑—ã–∫–æ–≤
function addLanguageToEditGuide() { /* ... */ }
function removeLanguageFromEditGuide(index) { /* ... */ }
function updateEditSelectedGuideLanguagesDisplay() { /* ... */ }
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ~1800 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–ª—è –º–æ–¥—É–ª—è Guides
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π: `saveGuide` vs `saveEditGuide`
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ UI –ª–æ–≥–∏–∫–∏: create modal vs edit modal
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Å–∫–∞–¥–Ω—ã—Ö dropdown'–æ–≤

---

#### –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

| –ú–æ–¥—É–ª—å | –§—É–Ω–∫—Ü–∏—è Create | –§—É–Ω–∫—Ü–∏—è Edit | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ | –û—Ü–µ–Ω–∫–∞ |
|--------|----------------|--------------|--------------|--------|
| Tours | `saveTourForm()` (unified) | ‚úÖ –¢–∞ –∂–µ | 0% | 9/10 |
| Hotels | Inline submit handler | `editHotel()` | ~30% | 6/10 |
| Guides | `saveGuide()` | `saveEditGuide()` | ~70% | 3/10 |
| Drivers | `saveDriver()` | `saveEditDriver()` | ~65% | 4/10 |
| Tour Blocks | `saveTourBlock()` (unified) | ‚úÖ –¢–∞ –∂–µ | 0% | 8/10 |

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–ü–†–ï–î–õ–û–ñ–ï–ù–ò–ï: –ï–¥–∏–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π**

```javascript
// ===== UNIFIED ADMIN FORM HANDLER =====
// –§–∞–π–ª: frontend/public/js/admin-unified-handler.js

/**
 * –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–∏
 * @param {Object} config - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
 */
async function saveEntity(config) {
  const {
    entityType,      // 'tour', 'hotel', 'guide'
    formSelector,    // '#tourForm'
    idField,         // 'tourId'
    apiEndpoint,     // '/api/tours'
    isFormData,      // true –¥–ª—è —Ñ–∞–π–ª–æ–≤
    onSuccess,       // callback
    onError          // callback
  } = config;
  
  // 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∂–∏–º (create/edit)
  const entityId = document.getElementById(idField)?.value;
  const isEditing = entityId && entityId !== '';
  
  // 2. –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã
  const data = collectFormData(formSelector, isFormData);
  
  // 3. –§–æ—Ä–º–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å
  const method = isEditing ? 'PUT' : 'POST';
  const url = isEditing ? `${apiEndpoint}/${entityId}` : apiEndpoint;
  
  // 4. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å
  try {
    const response = await fetch(url, {
      method,
      body: isFormData ? data : JSON.stringify(data),
      headers: isFormData ? {} : { 'Content-Type': 'application/json' }
    });
    
    if (response.ok) {
      onSuccess && onSuccess(await response.json());
    } else {
      onError && onError(await response.json());
    }
  } catch (error) {
    onError && onError(error);
  }
}

// ===== –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–ï =====

// –î–ª—è —Ç—É—Ä–æ–≤:
function saveTourForm() {
  saveEntity({
    entityType: 'tour',
    formSelector: '#tourForm',
    idField: 'tourId',
    apiEndpoint: '/api/tours',
    isFormData: true,
    onSuccess: (data) => {
      alert('Tour saved!');
      loadTours();
      closeTourModal();
    }
  });
}

// –î–ª—è –æ—Ç–µ–ª–µ–π:
function saveHotelForm() {
  saveEntity({
    entityType: 'hotel',
    formSelector: '#hotelForm',
    idField: 'hotelId',
    apiEndpoint: '/api/hotels',
    isFormData: false,
    onSuccess: (data) => {
      alert('Hotel saved!');
      loadHotels();
    }
  });
}

// –î–ª—è –≥–∏–¥–æ–≤:
function saveGuideForm() {
  saveEntity({
    entityType: 'guide',
    formSelector: '#guideForm',
    idField: 'guideId',
    apiEndpoint: '/api/guides',
    isFormData: true,  // –§–∞–π–ª—ã: avatar, documents
    onSuccess: (data) => {
      alert('Guide saved!');
      loadGuides();
    }
  });
}
```

**–ü–†–ï–ò–ú–£–©–ï–°–¢–í–ê –≠–¢–û–ì–û –ü–û–î–•–û–î–ê:**
1. ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π (DRY principle)
2. ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
3. ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
4. ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
5. ‚úÖ –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–¥–∞ –Ω–∞ ~40%

---

### 2.3 –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ —Ñ–∞–π–ª–æ–≤

#### –°–∏—Å—Ç–µ–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

**–¢–ï–•–ù–û–õ–û–ì–ò–ò:**
- Backend: **Multer** (express middleware)
- Frontend: **ObjectUploader** (React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
- Storage: **Local filesystem** (`uploads/images`, `uploads/guides`, `uploads/drivers`)

#### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  FRONTEND: ObjectUploader.js (React)       ‚îÇ
‚îÇ  - Drag & drop –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å                    ‚îÇ
‚îÇ  - Preview –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π                      ‚îÇ
‚îÇ  - –ü—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì FormData
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  BACKEND: Multer Middleware                ‚îÇ
‚îÇ  - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤                   ‚îÇ
‚îÇ  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ (5MB)               ‚îÇ
‚îÇ  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–º–µ–Ω               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì File saved
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  STORAGE: /uploads/images/                 ‚îÇ
‚îÇ  - image-{timestamp}-{random}.png          ‚îÇ
‚îÇ  - –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Express.static      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

**1. Backend - Multer Configuration (src/routes/uploadRoutes.ts)**

‚úÖ **–•–æ—Ä–æ—à–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
```typescript
const storage = multer.diskStorage({
  destination: (req, file, cb) => {
    const uploadDir = path.join(__dirname, '../../uploads/images');
    if (!fs.existsSync(uploadDir)) {
      fs.mkdirSync(uploadDir, { recursive: true });
    }
    cb(null, uploadDir);
  },
  filename: (req, file, cb) => {
    const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);
    cb(null, 'image-' + uniqueSuffix + path.extname(file.originalname));
  }
});

const fileFilter = (req: any, file: Express.Multer.File, cb: any) => {
  const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];
  if (allowedTypes.includes(file.mimetype)) {
    cb(null, true);  // ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ
  } else {
    cb(new Error('Invalid file type'), false);  // ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ–º –æ–ø–∞—Å–Ω—ã–µ —Ñ–∞–π–ª—ã
  }
};

const upload = multer({
  storage,
  fileFilter,
  limits: { fileSize: 5 * 1024 * 1024 }  // 5MB limit
});
```

**–ü–ª—é—Å—ã:**
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–ª–∏–∑–∏–∏)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è **–ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã–µ —Ñ–∞–π–ª—ã:** –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å `image.php.png`
- ‚ö†Ô∏è **–ù–µ—Ç —Å–∂–∞—Ç–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:** –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- ‚ö†Ô∏è **–ù–µ—Ç CDN –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:** –í—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –¥–∏—Å–∫–µ

**2. Frontend - getAbsoluteImageUrl (frontend/public/js/utils.js)**

‚úÖ **–£–º–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞:**
```javascript
function getAbsoluteImageUrl(relativePath) {
  const placeholder = 'https://via.placeholder.com/400x300/e0e0e0/666666?text=No+Image';
  
  if (!relativePath || typeof relativePath !== 'string') {
    return placeholder;  // ‚úÖ Fallback
  }
  
  // ‚úÖ –£–∂–µ –∞–±—Å–æ–ª—é—Ç–Ω—ã–π URL
  if (relativePath.startsWith('http://') || relativePath.startsWith('https://')) {
    return relativePath;
  }
  
  // ‚úÖ –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –æ—Ç –∫–æ—Ä–Ω—è
  if (relativePath.startsWith('/')) {
    return new URL(relativePath, window.location.origin).href;
  }
  
  // ‚úÖ –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –ø—É—Ç—å –±–µ–∑ —Å–ª–µ—à–∞
  return new URL('/' + relativePath, window.location.origin).href;
}
```

**–ü–ª—é—Å—ã:**
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã –ø—É—Ç–µ–π
- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π fallback –Ω–∞ placeholder
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤

**–ü–†–û–ë–õ–ï–ú–ê: –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**
```javascript
// ‚ùå –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è getAbsoluteImageUrl:

// admin-dashboard.html, —Å—Ç—Ä–æ–∫–∞ ~4500:
tour.mainImage  // –ü—Ä—è–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ, –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏

// home-page.js, —Å—Ç—Ä–æ–∫–∞ ~730:
<img src="${tour.mainImage || '/default-tour.jpg'}" />  // –†—É—á–Ω–æ–π fallback

// tour-template.html:
<img src="${tourData.mainImage}" />  // –ë–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ null

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (hotels):
<img src="${getAbsoluteImageUrl(hotel.images[0])}" />
```

#### –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–±–ª–µ–º —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏

**–ù–ê–ô–î–ï–ù–ù–´–ï –ë–ê–ì–ò:**
1. **Broken images –Ω–∞ tour cards:**
   ```javascript
   // –ï—Å–ª–∏ tour.mainImage === null, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è broken image icon
   // –†–µ—à–µ–Ω–∏–µ: –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å getAbsoluteImageUrl
   ```

2. **Inconsistent paths:**
   ```javascript
   // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏—Ç:
   - "/uploads/images/photo.png"        // ‚úÖ –ê–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å
   - "uploads/images/photo.png"         // ‚ùå –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π (–±–µ–∑ /)
   - "http://example.com/photo.png"     // ‚úÖ –í–Ω–µ—à–Ω–∏–π URL
   - null                                // ‚ùå –ù–µ—Ç fallback
   ```

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

**1. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:**
```javascript
// –°–æ–∑–¥–∞—Ç—å utils/imageHandler.js

class ImageHandler {
  static getImageUrl(path, options = {}) {
    const { 
      width = null, 
      height = null, 
      quality = 80,
      format = 'webp'
    } = options;
    
    // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ null/undefined
    if (!path) {
      return this.getPlaceholder(width, height);
    }
    
    // 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Ç–µ–π
    const absoluteUrl = getAbsoluteImageUrl(path);
    
    // 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
    if (width || height) {
      return this.getOptimizedUrl(absoluteUrl, { width, height, quality, format });
    }
    
    return absoluteUrl;
  }
  
  static getPlaceholder(width, height) {
    return `https://via.placeholder.com/${width || 400}x${height || 300}?text=No+Image`;
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
<img src="${ImageHandler.getImageUrl(tour.mainImage, { width: 400, height: 300 })}" />
```

**2. –î–æ–±–∞–≤–∏—Ç—å image optimization:**
```javascript
// Backend: sharp library
import sharp from 'sharp';

router.post('/upload', upload.single('image'), async (req, res) => {
  const originalPath = req.file.path;
  const optimizedPath = originalPath.replace(/\.\w+$/, '.webp');
  
  await sharp(originalPath)
    .resize(1200, 800, { fit: 'inside' })
    .webp({ quality: 80 })
    .toFile(optimizedPath);
  
  res.json({ url: optimizedPath });
});
```

**3. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ:**
```bash
# –ù–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é:
grep -r "\.mainImage" frontend/
grep -r "\.images\[" frontend/

# –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:
getAbsoluteImageUrl(tour.mainImage)
ImageHandler.getImageUrl(tour.mainImage)
```

**–û–¶–ï–ù–ö–ê –°–ò–°–¢–ï–ú–´ –ò–ó–û–ë–†–ê–ñ–ï–ù–ò–ô:** 6/10
- –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç
- –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ CDN

---

## –†–ê–ó–î–ï–õ 3: –û–¶–ï–ù–ö–ê –ö–ê–ß–ï–°–¢–í–ê –ö–û–î–ê

### 3.1 –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å

#### –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–¥–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | Backend | Frontend | –û—Ü–µ–Ω–∫–∞ |
|---------|---------|----------|--------|
| **–°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞** | 400-600 —Å—Ç—Ä–æ–∫ | 300-500 —Å—Ç—Ä–æ–∫ (–±–µ–∑ admin) | ‚úÖ –•–æ—Ä–æ—à–æ |
| **Largest file** | tourController.ts (1,400 —Å—Ç—Ä–æ–∫) | admin-dashboard.html (15,012!) | ‚ùå –ö—Ä–∏—Ç–∏—á–Ω–æ |
| **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏** | –£–º–µ—Ä–µ–Ω–Ω–æ (10-15%) | –ú–∞–ª–æ (5%) | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ |
| **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ** | CamelCase, –ø–æ–Ω—è—Ç–Ω–æ | –°–º–µ—à–∞–Ω–Ω–æ–µ (camel + snake) | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ |
| **TypeScript coverage** | 100% (backend) | 0% (frontend Vanilla JS) | ‚ö†Ô∏è –°—Ä–µ–¥–Ω–µ |

#### –ü—Ä–∏–º–µ—Ä—ã —á–∏—Ç–∞–µ–º–æ–≥–æ –∫–æ–¥–∞

‚úÖ **–•–û–†–û–®–û - Backend Controller (src/controllers/tourController.ts):**
```typescript
/**
 * Get a single tour by ID with multilingual support
 * GET /api/tours/:id?lang=en/ru&includeRaw=true
 */
static async getTourById(req: Request, res: Response, next: NextFunction) {
  try {
    const id = parseInt(req.params.id);
    const language = getLanguageFromRequest(req);
    const includeRaw = req.query.includeRaw === 'true';
    
    // ‚úÖ –ß–µ—Ç–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
    if (isNaN(id)) {
      return res.status(400).json({
        success: false,
        error: 'Invalid tour ID'
      });
    }

    // ‚úÖ –ü–æ–Ω—è—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞
    const tour = await TourModel.findById(id);
    
    if (!tour) {
      return res.status(404).json({
        success: false,
        error: 'Tour not found'
      });
    }

    // ‚úÖ –•–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
    const parsedTour = includeRaw ? {
      ...tour,
      title: safeJsonParse(tour.title),
      description: safeJsonParse(tour.description),
      _localized: {
        title: parseMultilingualField(tour.title, language),
        description: parseMultilingualField(tour.description, language),
      }
    } : {
      ...tour,
      title: parseMultilingualField(tour.title, language),
      description: parseMultilingualField(tour.description, language),
    };

    return res.json({
      success: true,
      data: parsedTour
    });
  } catch (error) {
    next(error);
  }
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ö–æ—Ä–æ—à–æ:**
- –ß–µ—Ç–∫–∏–π JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º endpoint'–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü–æ–Ω—è—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤ (raw vs localized)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

---

‚ùå **–ü–õ–û–•–û - Frontend Admin Panel (admin-dashboard.html):**
```javascript
// –°—Ç—Ä–æ–∫–∞ ~8500 (–º–æ–¥—É–ª—å Guides)
function openEditGuideModal(guide) {
  document.getElementById('editGuideModal').classList.add('active');
  document.getElementById('editGuideId').value = guide.id;
  document.getElementById('editGuideNameEN').value = guide._raw.name.en;
  document.getElementById('editGuideNameRU').value = guide._raw.name.ru;
  document.getElementById('editGuideDescEN').value = guide._raw.description.en;
  document.getElementById('editGuideDescRU').value = guide._raw.description.ru;
  document.getElementById('editGuideExperience').value = guide.experience || '';
  document.getElementById('editGuidePricePerDay').value = guide.pricePerDay || '';
  // ... –µ—â–µ 50+ —Å—Ç—Ä–æ–∫ –æ–¥–Ω–æ—Ç–∏–ø–Ω–æ–≥–æ –∫–æ–¥–∞
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø–ª–æ—Ö–æ:**
- –ù–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (—á—Ç–æ –¥–µ–ª–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è?)
- –ü–æ–≤—Ç–æ—Ä—è—é—â–∞—è—Å—è –ª–æ–≥–∏–∫–∞ (`getElementById` 50 —Ä–∞–∑)
- –ü—Ä—è–º–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ DOM (—Å–ª–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å)
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å `openCreateGuideModal()`

**–ö–ê–ö –ù–ê–î–û:**
```javascript
/**
 * –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–∏–¥–∞
 * @param {Object} guide - –û–±—ä–µ–∫—Ç –≥–∏–¥–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
 */
function openEditGuideModal(guide) {
  // 1. –û—Ç–∫—Ä—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
  const modal = document.getElementById('editGuideModal');
  modal.classList.add('active');
  
  // 2. –ó–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—É —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥
  const fieldMap = {
    'editGuideId': guide.id,
    'editGuideNameEN': guide._raw?.name?.en || '',
    'editGuideNameRU': guide._raw?.name?.ru || '',
    'editGuideDescEN': guide._raw?.description?.en || '',
    'editGuideDescRU': guide._raw?.description?.ru || '',
    'editGuideExperience': guide.experience || '',
    'editGuidePricePerDay': guide.pricePerDay || ''
  };
  
  // 3. –ï–¥–∏–Ω—ã–π —Ü–∏–∫–ª –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
  Object.entries(fieldMap).forEach(([id, value]) => {
    const element = document.getElementById(id);
    if (element) element.value = value;
  });
  
  // 4. –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
  loadEditGuideCountries(guide.countryId);
  loadEditGuideCitiesByCountry(guide.cityId);
}
```

#### –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ

**–°–¢–ê–¢–ò–°–¢–ò–ö–ê:**
- Backend: ~10-15% —Å—Ç—Ä–æ–∫ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- Frontend core scripts: ~5-8% —Å—Ç—Ä–æ–∫ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- Admin dashboard: ~3% —Å—Ç—Ä–æ–∫ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

**–ü–†–ò–ú–ï–†–´ –•–û–†–û–®–ò–• –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í:**
```javascript
// ‚úÖ –û–±—ä—è—Å–Ω—è–µ—Ç "–ø–æ—á–µ–º—É", –∞ –Ω–µ "—á—Ç–æ"
// üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨: –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–∞—Ä–æ–ª—å, –¥–∞–∂–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
password: undefined,

// ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –ø—Ä–æ–±–ª–µ–º–µ
// ‚ö†Ô∏è –í–†–ï–ú–ï–ù–ù–û: –ü–æ–ª—è country –∏ city –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (—É–¥–∞–ª–∏—Ç—å –≤ v2.0)
country: String?

// ‚úÖ –ü–æ–º–æ–≥–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
// ==================== –°–ï–ö–¶–ò–Ø 2: FORM DATA COLLECTION ====================
```

**–ü–†–ò–ú–ï–†–´ –ü–õ–û–•–ò–• –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í:**
```javascript
// ‚ùå –û—á–µ–≤–∏–¥–Ω–æ, –Ω–µ –Ω—É–∂–µ–Ω
// Set the value
element.value = value;

// ‚ùå –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–∫–æ–¥ –∏–∑–º–µ–Ω–∏–ª—Å—è, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–µ—Ç)
// Returns array of tours  (–Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Promise<Tour[]>)
```

**–û–¶–ï–ù–ö–ê –ß–ò–¢–ê–ï–ú–û–°–¢–ò:** 6/10
- Backend —á–∏—Ç–∞–µ–º—ã–π, frontend –∏–º–µ–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- Admin panel –Ω–µ—á–∏—Ç–∞–µ–º

---

### 3.2 –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (DRY Principle)

#### TOP 5 –ø—Ä–∏–º–µ—Ä–æ–≤ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

**1. ‚ùå –§—É–Ω–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω/–≥–æ—Ä–æ–¥–æ–≤ (4 –∫–æ–ø–∏–∏)**
```javascript
// frontend/admin-dashboard.html

// –ö–æ–ø–∏—è 1: –î–ª—è —Ñ–æ—Ä–º—ã —Ç—É—Ä–æ–≤ (—Å—Ç—Ä–æ–∫–∞ ~4500)
async function loadCountriesForTourForm() {
  const response = await fetch('/api/countries');
  const data = await response.json();
  const select = document.getElementById('tourCountry');
  select.innerHTML = '<option value="">Select Country</option>';
  data.data.forEach(country => {
    const option = document.createElement('option');
    option.value = country.id;
    option.textContent = country.nameRu;
    select.appendChild(option);
  });
}

// –ö–æ–ø–∏—è 2: –î–ª—è —Ñ–æ—Ä–º—ã –≥–∏–¥–æ–≤ (—Å—Ç—Ä–æ–∫–∞ ~8300)
async function loadGuideCountries() {
  const response = await fetch('/api/countries');
  const data = await response.json();
  const select = document.getElementById('guideCountry');
  select.innerHTML = '<option value="">Select Country</option>';
  data.data.forEach(country => {
    const option = document.createElement('option');
    option.value = country.id;
    option.textContent = country.nameRu;
    select.appendChild(option);
  });
}

// –ö–æ–ø–∏—è 3: –î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–∏–¥–æ–≤ (—Å—Ç—Ä–æ–∫–∞ ~8557)
async function loadEditGuideCountries() {
  // ... –¢–û–ß–ù–û –¢–û–¢ –ñ–ï –ö–û–î ...
}

// –ö–æ–ø–∏—è 4: –î–ª—è —Ñ–æ—Ä–º—ã —Ç—É—Ä–∞–≥–µ–Ω—Ç–æ–≤ (—Å—Ç—Ä–æ–∫–∞ ~10253)
async function loadCountriesForEditTourAgent() {
  // ... –¢–û–ß–ù–û –¢–û–¢ –ñ–ï –ö–û–î ...
}

// ‚ùå –ü–†–û–ë–õ–ï–ú–ê: 4 –∫–æ–ø–∏–∏ √ó 30 —Å—Ç—Ä–æ–∫ = 120 —Å—Ç—Ä–æ–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞
```

**–†–ï–®–ï–ù–ò–ï: –ï–¥–∏–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è**
```javascript
/**
 * –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω –≤ select
 * @param {string} selectId - ID —ç–ª–µ–º–µ–Ω—Ç–∞ <select>
 * @param {number} selectedId - ID –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω—ã (–¥–ª—è edit —Ä–µ–∂–∏–º–∞)
 */
async function loadCountries(selectId, selectedId = null) {
  try {
    const response = await fetch('/api/countries');
    const data = await response.json();
    const select = document.getElementById(selectId);
    
    if (!select) {
      console.error(`Select element with id "${selectId}" not found`);
      return;
    }
    
    select.innerHTML = '<option value="">Select Country</option>';
    
    data.data.forEach(country => {
      const option = document.createElement('option');
      option.value = country.id;
      option.textContent = country.nameRu;
      option.selected = country.id === selectedId;
      select.appendChild(option);
    });
  } catch (error) {
    console.error('Error loading countries:', error);
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
loadCountries('tourCountry');            // –î–ª—è —Ç—É—Ä–æ–≤
loadCountries('guideCountry');           // –î–ª—è –≥–∏–¥–æ–≤
loadCountries('editGuideCountry', 3);    // –î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–∏–¥–∞ —Å–æ —Å—Ç—Ä–∞–Ω–æ–π id=3
```

**–≠–ö–û–ù–û–ú–ò–Ø:** 120 —Å—Ç—Ä–æ–∫ ‚Üí 30 —Å—Ç—Ä–æ–∫ (75% –º–µ–Ω—å—à–µ –∫–æ–¥–∞)

---

**2. ‚ùå –ü–∞—Ä—Å–∏–Ω–≥ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã—Ö –ø–æ–ª–µ–π (3 —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)**
```javascript
// –ö–æ–ø–∏—è 1: frontend/public/js/multilingual-utils.js (—Å—Ç—Ä–æ–∫–∞ 65)
function parseMultilingualField(field, lang = 'ru') {
  if (!field) return '';
  if (typeof field === 'string') {
    try {
      const parsed = JSON.parse(field);
      return parsed[lang] || parsed.ru || '';
    } catch { return field; }
  }
  if (typeof field === 'object') {
    return field[lang] || field.ru || '';
  }
  return '';
}

// –ö–æ–ø–∏—è 2: frontend/public/js/admin-helpers.js (—Å—Ç—Ä–æ–∫–∞ 823)
function parseMultilingualField(field, lang = 'ru') {
  // ... –¢–û–ß–ù–û –¢–û–¢ –ñ–ï –ö–û–î ...
}

// –ö–æ–ø–∏—è 3: src/utils/multilingual.ts (backend)
export function parseMultilingualField(
  field: string | MultilingualField, 
  language: SupportedLanguage = 'ru'
): string {
  // ... –¢–û–ß–ù–û –¢–û–¢ –ñ–ï –ö–û–î (–Ω–æ –Ω–∞ TypeScript) ...
}
```

**–†–ï–®–ï–ù–ò–ï:**
- –°–æ–∑–¥–∞—Ç—å `shared/multilingual.js` (–∏–∑–æ–º–æ—Ä—Ñ–Ω—ã–π –∫–æ–¥)
- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ –∏ –±—ç–∫–µ
- –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã

---

**3. ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API (—Ä–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã)**
```javascript
// –í–∞—Ä–∏–∞–Ω—Ç 1 (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã):
try {
  const result = await operation();
  return res.json({ success: true, data: result });
} catch (error) {
  return res.status(500).json({ success: false, error: error.message });
}

// –í–∞—Ä–∏–∞–Ω—Ç 2 (–¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã):
try {
  const result = await operation();
  return res.json({ success: true, data: result });
} catch (error) {
  next(error);  // –ü–µ—Ä–µ–¥–∞–µ–º –≤ error handler middleware
}

// –í–∞—Ä–∏–∞–Ω—Ç 3 (–µ—â–µ —á–∞—Å—Ç—å):
try {
  const result = await operation();
  res.json({ success: true, data: result });
} catch (error) {
  console.error('Error:', error);
  res.status(500).json({ success: false, message: 'Internal server error' });
}
```

**–†–ï–®–ï–ù–ò–ï: –ï–¥–∏–Ω—ã–π error handler**
```typescript
// src/middleware/errorHandler.ts
export function handleAsyncError(fn: Function) {
  return (req: Request, res: Response, next: NextFunction) => {
    Promise.resolve(fn(req, res, next)).catch(next);
  };
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
router.get('/tours/:id', handleAsyncError(async (req, res) => {
  const tour = await TourModel.findById(parseInt(req.params.id));
  if (!tour) {
    throw new NotFoundError('Tour not found');
  }
  return res.json({ success: true, data: tour });
}));
```

---

**4. ‚ùå –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (copy-paste –≤ 10+ –º–µ—Å—Ç–∞—Ö)**
```typescript
// tourController.ts
if (!title || !title.en || !title.ru) {
  return res.status(400).json({ success: false, error: 'Title required' });
}

// hotelController.ts
if (!name || !name.en || !name.ru) {
  return res.status(400).json({ success: false, error: 'Name required' });
}

// guideController.ts
if (!name || !name.en || !name.ru) {
  return res.status(400).json({ success: false, error: 'Name required' });
}
```

**–†–ï–®–ï–ù–ò–ï:**
```typescript
// src/utils/validators.ts
export function validateMultilingualField(
  field: any, 
  fieldName: string
): void {
  if (!field || !field.en || !field.ru) {
    throw new ValidationError(`${fieldName} is required in both languages`);
  }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
validateMultilingualField(title, 'Title');
validateMultilingualField(description, 'Description');
```

---

**5. ‚ùå –°–æ–∑–¥–∞–Ω–∏–µ/–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º (Guides, Drivers)**
```javascript
// 2 –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ 200 —Å—Ç—Ä–æ–∫ –∫–∞–∂–¥–∞—è:
function saveGuide() { /* 200 —Å—Ç—Ä–æ–∫ */ }
function saveEditGuide() { /* 200 —Å—Ç—Ä–æ–∫ (95% –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ) */ }
```

**–£–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ —Ä–µ—à–µ–Ω–∏–µ –≤ —Ä–∞–∑–¥–µ–ª–µ 2.2**

---

#### –ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ | –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—è |
|-----------|-------------------|------------------------|
| –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω/–≥–æ—Ä–æ–¥–æ–≤ | ~120 —Å—Ç—Ä–æ–∫ | 75% |
| –ü–∞—Ä—Å–∏–Ω–≥ JSON –ø–æ–ª–µ–π | ~90 —Å—Ç—Ä–æ–∫ | 66% |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º (create/edit) | ~800 —Å—Ç—Ä–æ–∫ | 50% |
| –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π | ~150 —Å—Ç—Ä–æ–∫ | 80% |
| API error handling | ~200 —Å—Ç—Ä–æ–∫ | 70% |
| **–ò–¢–û–ì–û** | **~1,360 —Å—Ç—Ä–æ–∫** | **68% —Å—Ä–µ–¥–Ω–µ–µ** |

**–û–¶–ï–ù–ö–ê DRY:** 4/10  
–ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è, —Å—Ä–æ—á–Ω–æ –Ω—É–∂–µ–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

---

### 3.3 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### –ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–ü–û–õ–û–ñ–ò–¢–ï–õ–¨–ù–´–ï –ê–°–ü–ï–ö–¢–´:**

1. ‚úÖ **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (bcrypt):**
```typescript
// src/controllers/adminController.ts (—Å—Ç—Ä–æ–∫–∞ 103)
const saltRounds = 10;
const hashedPassword = await bcrypt.hash(password, saltRounds);
```

2. ‚úÖ **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
```typescript
// src/middleware/auth.ts
jwt.verify(token, JWT_SECRET, (err, user) => {
  if (err) return res.status(403).json({ message: 'Invalid token' });
  req.user = user;
  next();
});
```

3. ‚úÖ **HMAC –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö callback'–æ–≤:**
```typescript
// src/controllers/alifController.ts (—Å—Ç—Ä–æ–∫–∞ 168)
const expected = crypto
  .createHmac('sha256', alifMerchantPassword)
  .update(merchant_id)
  .digest('hex');

if (signature !== expected) {
  return res.status(403).json({ message: 'Invalid signature' });
}
```

4. ‚úÖ **Prisma ORM (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection):**
```typescript
// –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ Prisma - –±–µ–∑–æ–ø–∞—Å–Ω–æ
const tour = await prisma.tour.findUnique({ where: { id } });
```

5. ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤:**
```typescript
// src/routes/uploadRoutes.ts
const fileFilter = (req, file, cb) => {
  const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp'];
  if (allowedTypes.includes(file.mimetype)) {
    cb(null, true);
  } else {
    cb(new Error('Invalid file type'), false);
  }
};
```

---

**–ü–†–û–ë–õ–ï–ú–´ –ò –£–Ø–ó–í–ò–ú–û–°–¢–ò:**

**1. ‚ùå –ö–†–ò–¢–ò–ß–ù–û: Default JWT Secret**
```typescript
// src/middleware/auth.ts (—Å—Ç—Ä–æ–∫–∞ 8)
const JWT_SECRET = process.env.JWT_SECRET || 'default-secret-key';
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ï—Å–ª–∏ `JWT_SECRET` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `.env`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–π –∫–ª—é—á
- –ê—Ç–∞–∫—É—é—â–∏–π –º–æ–∂–µ—Ç –ø–æ–¥–¥–µ–ª–∞—Ç—å JWT —Ç–æ–∫–µ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
const JWT_SECRET = process.env.JWT_SECRET;
if (!JWT_SECRET) {
  throw new Error('JWT_SECRET environment variable is required');
}
```

---

**2. ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ rate limiting**
```typescript
// –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç brute-force –∞—Ç–∞–∫ –Ω–∞ /api/admin/login
router.post('/login', AdminController.login);
```

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
import rateLimit from 'express-rate-limit';

const loginLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,  // 15 –º–∏–Ω—É—Ç
  max: 5,                     // 5 –ø–æ–ø—ã—Ç–æ–∫
  message: 'Too many login attempts, please try again later'
});

router.post('/login', loginLimiter, AdminController.login);
```

---

**3. ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ CSRF –∑–∞—â–∏—Ç—ã**
```typescript
// –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç CSRF —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è —Ñ–æ—Ä–º
// –ê—Ç–∞–∫—É—é—â–∏–π –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –æ—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
import csrf from 'csurf';

const csrfProtection = csrf({ cookie: true });
app.use(csrfProtection);

// –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å CSRF —Ç–æ–∫–µ–Ω –≤ –∫–∞–∂–¥—É—é —Ñ–æ—Ä–º—É:
res.render('form', { csrfToken: req.csrfToken() });
```

---

**4. ‚ö†Ô∏è –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤**
```javascript
// index.js
// –°–µ–∫—Ä–µ—Ç—ã hardcoded –≤ –∫–æ–¥–µ (—Ö–æ—Ç—è –∏ –∏–∑ process.env)
// –ù–û: –Ω–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —á—Ç–æ –æ–Ω–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ï—Å–ª–∏ `.env` —Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å undefined —Å–µ–∫—Ä–µ—Ç–∞–º–∏
- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
// src/config/validateEnv.ts
const requiredEnvVars = [
  'DATABASE_URL',
  'JWT_SECRET',
  'ALIF_MERCHANT_KEY',
  'ALIF_MERCHANT_PASSWORD',
  'SMTP_HOST',
  'SMTP_USER',
  'SMTP_PASSWORD'
];

requiredEnvVars.forEach(varName => {
  if (!process.env[varName]) {
    throw new Error(`Missing required environment variable: ${varName}`);
  }
});
```

---

**5. ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è XSS —É—è–∑–≤–∏–º–æ—Å—Ç—å –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ**
```javascript
// admin-dashboard.html (–º–Ω–æ–∂–µ—Å—Ç–≤–æ –º–µ—Å—Ç)
element.innerHTML = userProvidedData;  // ‚ùå –û–ø–∞—Å–Ω–æ!

// –ü—Ä–∏–º–µ—Ä (—Å—Ç—Ä–æ–∫–∞ ~4500):
tourCard.innerHTML = `
  <h3>${tour.title}</h3>
  <p>${tour.description}</p>
`;
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ï—Å–ª–∏ `tour.title` —Å–æ–¥–µ—Ä–∂–∏—Ç `<script>alert('XSS')</script>`, –∫–æ–¥ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –í–∞—Ä–∏–∞–Ω—Ç 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å textContent
tourCard.textContent = tour.title;

// –í–∞—Ä–∏–∞–Ω—Ç 2: Sanitize HTML
import DOMPurify from 'dompurify';
tourCard.innerHTML = DOMPurify.sanitize(`<h3>${tour.title}</h3>`);

// –í–∞—Ä–∏–∞–Ω—Ç 3: Escape —Ñ—É–Ω–∫—Ü–∏—è
function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}
tourCard.innerHTML = `<h3>${escapeHtml(tour.title)}</h3>`;
```

---

**6. ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ HTTPS redirect**
```javascript
// index.js
// –ü–†–û–ë–õ–ï–ú–ê: –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
```

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
if (process.env.NODE_ENV === 'production') {
  app.use((req, res, next) => {
    if (req.header('x-forwarded-proto') !== 'https') {
      res.redirect(`https://${req.header('host')}${req.url}`);
    } else {
      next();
    }
  });
}
```

---

**7. ‚ö†Ô∏è –°–ª–∞–±–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤**
```typescript
// uploadRoutes.ts
// –ü–†–û–ë–õ–ï–ú–ê: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ MIME type, –∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞

// –ó–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫ –º–æ–∂–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å:
// malicious.php —Å MIME type "image/png"
```

**–†–µ—à–µ–Ω–∏–µ:**
```typescript
import fileType from 'file-type';

const fileFilter = async (req, file, cb) => {
  const buffer = await file.buffer;
  const type = await fileType.fromBuffer(buffer);
  
  const allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];
  if (type && allowedTypes.includes(type.mime)) {
    cb(null, true);
  } else {
    cb(new Error('Invalid file type'), false);
  }
};
```

---

#### –û—Ü–µ–Ω–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** | 7/10 | JWT + bcrypt, –Ω–æ default secret |
| **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** | 6/10 | –ë–∞–∑–æ–≤–∞—è, –Ω–æ –Ω–µ—Ç —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª–∏ |
| **SQL Injection** | 10/10 | Prisma ORM - –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞—â–∏—â–µ–Ω |
| **XSS** | 5/10 | –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ |
| **CSRF** | 3/10 | –ù–µ—Ç –∑–∞—â–∏—Ç—ã |
| **Rate Limiting** | 2/10 | –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç |
| **File Upload** | 6/10 | –ë–∞–∑–æ–≤–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è |
| **Secrets Management** | 7/10 | .env —Ñ–∞–π–ª—ã, –Ω–æ –Ω–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ |
| **HTTPS** | 8/10 | –†–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –Ω–µ—Ç —Ñ–æ—Ä—Å–∏—Ä–æ–≤–∞–Ω–∏—è |
| **–û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê** | **6/10** | –ë–∞–∑–æ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –µ—Å—Ç—å, –∫—Ä–∏—Ç–∏—á–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç, –Ω–æ –º–Ω–æ–≥–æ —É–ª—É—á—à–µ–Ω–∏–π |

---

## –†–ê–ó–î–ï–õ 4: –°–¢–†–ê–¢–ï–ì–ò–ß–ï–°–ö–ò–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### üéØ –¢–û–ü-5 –ü–†–ò–û–†–ò–¢–ï–¢–ù–´–• –®–ê–ì–û–í –î–õ–Ø –£–õ–£–ß–®–ï–ù–ò–Ø –ü–†–û–ï–ö–¢–ê

–ï—Å–ª–∏ –±—ã —ç—Ç–æ –±—ã–ª –º–æ–π –ø—Ä–æ–µ–∫—Ç, —è –±—ã –ø—Ä–µ–¥–ø—Ä–∏–Ω—è–ª —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—è –µ–≥–æ –≤ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π –∏ –ª–µ–≥–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –ø—Ä–æ–¥—É–∫—Ç:

---

### –®–ê–ì 1: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ admin-dashboard.html (–ö–†–ò–¢–ò–ß–ù–û)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í–´–°–û–ö–ò–ô  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è  
**–í—Ä–µ–º—è:** 2-3 –Ω–µ–¥–µ–ª–∏  
**Impact:** –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å ‚Üë70%, –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å ‚Üë80%

#### –ü—Ä–æ–±–ª–µ–º–∞
15,012 —Å—Ç—Ä–æ–∫ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ - —ç—Ç–æ **–º–æ–Ω–æ–ª–∏—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å**. –õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∏—Å–∫—É–µ—Ç —Å–ª–æ–º–∞—Ç—å –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏, merge conflicts –≤ –∫–æ–º–∞–Ω–¥–µ –Ω–µ–∏–∑–±–µ–∂–Ω—ã, –∞ –Ω–æ–≤—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –Ω—É–∂–Ω—ã –¥–Ω–∏, —á—Ç–æ–±—ã —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è.

#### –†–µ—à–µ–Ω–∏–µ
–†–∞–∑–±–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

```
frontend/
‚îú‚îÄ‚îÄ admin/
‚îÇ   ‚îú‚îÄ‚îÄ index.html                    # Shell (–∑–∞–≥—Ä—É–∂–∞–µ—Ç –º–æ–¥—É–ª–∏)
‚îÇ   ‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tours/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tours.html           # UI –º–æ–¥—É–ª—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tours.js             # –õ–æ–≥–∏–∫–∞ –º–æ–¥—É–ª—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tours.css            # –°—Ç–∏–ª–∏ –º–æ–¥—É–ª—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hotels/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hotels.html
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hotels.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ hotels.css
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ guides/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reviews/
‚îÇ   ‚îú‚îÄ‚îÄ shared/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ modal.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ table.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ form.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validators.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ formatters.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ variables.css
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ components.css
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ layout.css
‚îÇ   ‚îî‚îÄ‚îÄ core/
‚îÇ       ‚îú‚îÄ‚îÄ router.js                # SPA —Ä–æ—É—Ç–µ—Ä
‚îÇ       ‚îú‚îÄ‚îÄ state.js                 # –ü—Ä–æ—Å—Ç–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
‚îÇ       ‚îî‚îÄ‚îÄ loader.js                # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π
```

#### –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π
1. **–ù–µ–¥–µ–ª—è 1:** –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ –∏ core —Å–∏—Å—Ç–µ–º—É
2. **–ù–µ–¥–µ–ª—è 2:** –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å 3 –º–æ–¥—É–ª—è (Tours, Hotels, Guides)
3. **–ù–µ–¥–µ–ª—è 3:** –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ + —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –Ω–µ–∑–∞–≤–∏—Å–∏–º (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ Git
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (lazy loading –º–æ–¥—É–ª–µ–π)

---

### –®–ê–ì 2: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ä–º (DRY)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í–´–°–û–ö–ò–ô  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è  
**–í—Ä–µ–º—è:** 1 –Ω–µ–¥–µ–ª—è  
**Impact:** Code size ‚Üì40%, Bugs ‚Üì60%

#### –ü—Ä–æ–±–ª–µ–º–∞
–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ-—Å–≤–æ–µ–º—É:
- Tours: 1 —Ñ—É–Ω–∫—Ü–∏—è (—Ö–æ—Ä–æ—à–æ)
- Hotels: inline handler (—Å—Ä–µ–¥–Ω–µ)
- Guides: 2 —Ñ—É–Ω–∫—Ü–∏–∏ —Å 70% –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º (–ø–ª–æ—Ö–æ)

–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ **–Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ–º—É UX** –∏ **–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—é –±–∞–≥–æ–≤**.

#### –†–µ—à–µ–Ω–∏–µ
–°–æ–∑–¥–∞—Ç—å **Unified Admin Form Handler** (–ø–æ–∫–∞–∑–∞–Ω –≤ —Ä–∞–∑–¥–µ–ª–µ 2.2):

```javascript
// frontend/shared/utils/form-handler.js
class AdminFormHandler {
  constructor(config) {
    this.config = config;
    this.formElement = document.getElementById(config.formId);
    this.setupEventListeners();
  }
  
  async save() {
    const data = this.collectFormData();
    const isValid = this.validate(data);
    
    if (!isValid) return;
    
    const result = await this.apiRequest(data);
    this.handleSuccess(result);
  }
  
  collectFormData() { /* ... */ }
  validate(data) { /* ... */ }
  apiRequest(data) { /* ... */ }
  handleSuccess(result) { /* ... */ }
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
const tourForm = new AdminFormHandler({
  formId: 'tourForm',
  entity: 'tour',
  endpoint: '/api/tours',
  onSuccess: () => { loadTours(); closeTourModal(); }
});
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –ï–¥–∏–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–æ—Ä–º—ã

---

### –®–ê–ì 3: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—Ö–µ–º—ã –ë–î (Json –¥–ª—è –≤—Å–µ—Ö –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã—Ö –ø–æ–ª–µ–π)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°–†–ï–î–ù–ò–ô  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è  
**–í—Ä–µ–º—è:** 1 –Ω–µ–¥–µ–ª—è  
**Impact:** Consistency ‚Üë100%, Future-proof ‚úÖ

#### –ü—Ä–æ–±–ª–µ–º–∞
–ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ —Å—Ö–µ–º–µ –ë–î:
- `Tour.title` - Json ‚úÖ
- `Hotel.name` - Json ‚úÖ
- `Country.name` - String ‚ùå (+ nameRu, nameEn –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
- `Category.name` - String ‚ùå

–≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç **—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥** –∏ —É—Å–ª–æ–∂–Ω—è–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —è–∑—ã–∫–æ–≤.

#### –†–µ—à–µ–Ω–∏–µ
**Migration Plan:**

```prisma
// prisma/schema.prisma

// –î–û:
model Country {
  id     Int    @id @default(autoincrement())
  name   String @unique
  nameRu String
  nameEn String
}

// –ü–û–°–õ–ï:
model Country {
  id   Int  @id @default(autoincrement())
  name Json // { en: "Tajikistan", ru: "–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω" }
  code String @unique
}

// –¢–æ –∂–µ –¥–ª—è City, Category
```

**–ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:**
```typescript
// prisma/migrations/unify-multilingual-fields.ts
import { prisma } from '../src/config/database';

async function migrate() {
  // 1. –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω—ã
  const countries = await prisma.$queryRaw`
    SELECT id, name, "nameRu", "nameEn" FROM countries
  `;
  
  // 2. –û–±–Ω–æ–≤–∏—Ç—å –∫–∞–∂–¥—É—é —Å—Ç—Ä–∞–Ω—É
  for (const country of countries) {
    await prisma.$executeRaw`
      UPDATE countries 
      SET name = ${JSON.stringify({ ru: country.nameRu, en: country.nameEn })}
      WHERE id = ${country.id}
    `;
  }
  
  // 3. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Å—Ç–æ–ª–±—Ü—ã
  await prisma.$executeRaw`
    ALTER TABLE countries DROP COLUMN "nameRu", DROP COLUMN "nameEn"
  `;
}
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î
- ‚úÖ –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —è–∑—ã–∫–∏ (–∫–∏—Ç–∞–π—Å–∫–∏–π, –∏—Å–ø–∞–Ω—Å–∫–∏–π –∏ —Ç.–¥.)
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞ (–µ–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥)

---

### –®–ê–ì 4: –£—Å–∏–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (Production-ready)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í–´–°–û–ö–ò–ô  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è  
**–í—Ä–µ–º—è:** 3-5 –¥–Ω–µ–π  
**Impact:** Security ‚Üë80%

#### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –º–µ—Ä—ã

**1. –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π JWT_SECRET**
```typescript
// src/config/validateEnv.ts (–ù–û–í–´–ô –§–ê–ô–õ)
const requiredSecrets = ['JWT_SECRET', 'DATABASE_URL', /* ... */];

requiredSecrets.forEach(secret => {
  if (!process.env[secret]) {
    throw new Error(`‚ùå CRITICAL: ${secret} is not set in environment`);
  }
});

// –í—ã–∑–≤–∞—Ç—å –≤ index.js –î–û –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
```

**2. Rate Limiting**
```typescript
import rateLimit from 'express-rate-limit';

const authLimiter = rateLimit({
  windowMs: 15 * 60 * 1000,  // 15 –º–∏–Ω
  max: 5,
  message: 'Too many attempts'
});

router.post('/login', authLimiter, AdminController.login);
```

**3. Helmet.js (Security headers)**
```typescript
import helmet from 'helmet';

app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'", 'cdn.tailwindcss.com'],
      scriptSrc: ["'self'", "'unsafe-inline'"],
      imgSrc: ["'self'", 'data:', 'https:']
    }
  }
}));
```

**4. XSS Protection –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ**
```javascript
// frontend/shared/utils/sanitize.js
export function escapeHtml(text) {
  const div = document.createElement('div');
  div.textContent = text;
  return div.innerHTML;
}

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
element.innerHTML = `<h3>${escapeHtml(userInput)}</h3>`;
```

**5. HTTPS Enforcement**
```javascript
if (process.env.NODE_ENV === 'production') {
  app.use((req, res, next) => {
    if (req.header('x-forwarded-proto') !== 'https') {
      res.redirect(`https://${req.header('host')}${req.url}`);
    } else {
      next();
    }
  });
}
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç brute-force
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ HTTP headers
- ‚úÖ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π HTTPS
- ‚úÖ XSS protection
- ‚úÖ Production-ready security

---

### –®–ê–ì 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ CDN
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü¢ –ù–ò–ó–ö–ò–ô (–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è —Ä–æ—Å—Ç–∞)  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** –°—Ä–µ–¥–Ω—è—è  
**–í—Ä–µ–º—è:** 1 –Ω–µ–¥–µ–ª—è  
**Impact:** Performance ‚Üë50%, Costs ‚Üì60%

#### –ü—Ä–æ–±–ª–µ–º–∞
- –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã (5MB+) –æ—Ç–¥–∞—é—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—É
- –ù–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è, CDN

#### –†–µ—à–µ–Ω–∏–µ
**–í–∞—Ä–∏–∞–Ω—Ç 1: Self-hosted optimization**
```typescript
// src/services/imageOptimizer.ts
import sharp from 'sharp';

export async function optimizeImage(inputPath: string) {
  const optimized = await sharp(inputPath)
    .resize(1200, 800, { fit: 'inside', withoutEnlargement: true })
    .webp({ quality: 80 })
    .toBuffer();
  
  // –°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–º–µ—Ä–æ–≤ (thumbnail, medium, large)
  const sizes = {
    thumbnail: await sharp(inputPath).resize(200, 200).webp({ quality: 70 }).toBuffer(),
    medium: await sharp(inputPath).resize(600, 400).webp({ quality: 75 }).toBuffer(),
    large: optimized
  };
  
  return sizes;
}
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: CDN –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (Cloudflare Images / AWS S3 + CloudFront)**
```typescript
// src/services/cdn.ts
import AWS from 'aws-sdk';

const s3 = new AWS.S3({
  accessKeyId: process.env.AWS_ACCESS_KEY,
  secretAccessKey: process.env.AWS_SECRET_KEY
});

export async function uploadToCDN(file: Express.Multer.File) {
  const params = {
    Bucket: 'bunyod-tour',
    Key: `images/${Date.now()}-${file.originalname}`,
    Body: file.buffer,
    ContentType: file.mimetype,
    CacheControl: 'max-age=31536000'  // 1 –≥–æ–¥ –∫–µ—à
  };
  
  const result = await s3.upload(params).promise();
  return result.Location;  // CDN URL
}
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
router.post('/upload', upload.single('image'), async (req, res) => {
  // 1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å
  const optimized = await optimizeImage(req.file.path);
  
  // 2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ CDN
  const cdnUrl = await uploadToCDN(optimized.large);
  
  // 3. –í–µ—Ä–Ω—É—Ç—å URL
  res.json({ url: cdnUrl });
});
```

#### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü (WebP –≤–º–µ—Å—Ç–æ PNG)
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ (~80%)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å (CDN handle millions requests)

---

## –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê –ü–†–û–ï–ö–¢–ê

### –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

| –ê—Å–ø–µ–∫—Ç | –¢–µ–∫—É—â–∞—è –æ—Ü–µ–Ω–∫–∞ | –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ | –£–ª—É—á—à–µ–Ω–∏–µ |
|--------|----------------|---------------------|-----------|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | 7/10 | 9/10 | +28% |
| **Frontend Code** | 5/10 | 8/10 | +60% |
| **Backend Code** | 7.5/10 | 8.5/10 | +13% |
| **Database Design** | 7/10 | 9/10 | +28% |
| **Security** | 6/10 | 9/10 | +50% |
| **Maintainability** | 5/10 | 9/10 | +80% |
| **Performance** | 7/10 | 9/10 | +28% |
| **Scalability** | 6/10 | 9/10 | +50% |
| **–û–ë–©–ê–Ø –û–¶–ï–ù–ö–ê** | **6.5/10** | **8.8/10** | **+35%** |

### Roadmap –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –§–ê–ó–ê 1: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø (3 –Ω–µ–¥–µ–ª–∏)‚îÇ
‚îÇ  - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ admin-dashboard.html        ‚îÇ
‚îÇ  - –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ–æ—Ä–º                          ‚îÇ
‚îÇ  - –£—Å–∏–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –§–ê–ó–ê 2: –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø (2 –Ω–µ–¥–µ–ª–∏)            ‚îÇ
‚îÇ  - –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –ë–î (Json fields)             ‚îÇ
‚îÇ  - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π                  ‚îÇ
‚îÇ  - Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –§–ê–ó–ê 3: –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–ï (4 –Ω–µ–¥–µ–ª–∏)       ‚îÇ
‚îÇ  - CDN –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è                           ‚îÇ
‚îÇ  - Redis –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ                        ‚îÇ
‚îÇ  - Load balancing –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å               ‚îÇ
‚îÇ  - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Sentry, DataDog)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**Bunyod-Tour** - —ç—Ç–æ **–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç** —Å —Ö–æ—Ä–æ—à–∏–º —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–º, –Ω–æ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º –¥–æ–ª–≥–æ–º –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏**. –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã (–º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç—å, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –±—ç–∫–µ–Ω–¥ API) —Ä–∞–±–æ—Ç–∞—é—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ, –Ω–æ **–Ω–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –∫–æ–¥–µ –∏ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–æ–∑–¥–∞—é—Ç —Ä–∏—Å–∫–∏ –ø—Ä–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏.

### –ß—Ç–æ —Ö–æ—Ä–æ—à–æ —Å–µ–π—á–∞—Å:
‚úÖ –ü—Ä–æ–¥—É–º–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (MVC –Ω–∞ –±—ç–∫–µ–Ω–¥–µ)  
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ë–î (Prisma ORM)  
‚úÖ –ò–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏  
‚úÖ –ë–∞–∑–æ–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (JWT, bcrypt, HMAC)  
‚úÖ –†–∞–±–æ—Ç–∞—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∏—á–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)

### –ß—Ç–æ –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —É–ª—É—á—à–µ–Ω–∏–∏:
‚ùå Admin dashboard - –º–æ–Ω–æ–ª–∏—Ç (15,012 —Å—Ç—Ä–æ–∫)  
‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (~1,360 —Å—Ç—Ä–æ–∫)  
‚ùå –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–æ—Ä–º  
‚ùå –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–Ω–µ—Ç rate limiting, CSRF, default secrets)  
‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –ú–æ–π –≤–µ—Ä–¥–∏–∫—Ç:
**–° —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–º –ø–æ 5-—à–∞–≥–æ–≤–æ–º—É –ø–ª–∞–Ω—É –ø—Ä–æ–µ–∫—Ç —Å—Ç–∞–Ω–µ—Ç production-ready enterprise-—É—Ä–æ–≤–Ω—è.**  
**–ë–µ–∑ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ - —Ç–µ—Ö–¥–æ–ª–≥ –±—É–¥–µ—Ç —Ä–∞—Å—Ç–∏ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ.**

**–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:** –í—ã–¥–µ–ª–∏—Ç—å 6-8 –Ω–µ–¥–µ–ª—å –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤—Å–µ—Ö 5 —à–∞–≥–æ–≤. ROI –±—É–¥–µ—Ç –æ–≥—Ä–æ–º–Ω—ã–º - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ 2-3 —Ä–∞–∑–∞, —Å–Ω–∏–∂–µ–Ω–∏–µ –±–∞–≥–æ–≤ –Ω–∞ 60%, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é.

---

**–ö–æ–Ω–µ—Ü –æ—Ç—á–µ—Ç–∞**  
*–ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ code review –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞*
